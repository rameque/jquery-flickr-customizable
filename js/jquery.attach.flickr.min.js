(function(a){a.flickrClass=function(){};a.flickrClass.prototype.settings={counter:1,per_page:10,user_id:"",tags:"",api_key:"",thumbnail_size:"",gallery_id:"",extras:"",imageLink:true,sizeLinkImage:"m",description:false,description_attr:"title,description,date,tags",clearContainer:false,template:"none",tpl:"",repeattpl:"",repeattpl_description:"",desCotentCSS:"content-css",descCSS:"des-css",dateCSS:"date-css",tagCSS:"label notice",titleCSS:"title-css",linkTagCSS:"link-css",titleImg:"title",replaceTitle:false,callback_end:function(){},controByCallback:false};a.flickr={};a.flickr.counter=0;a.flickr.APIFlickr={"flickr.photos.search":{api_key:"",user_id:"",tags:"",tag_mode:"",text:"",min_upload_date:"",max_upload_date:"",min_taken_date:"",max_taken_date:"",license:"",sort:"",privacy_filter:"",bbox:"",accuracy:"",safe_search:"",content_type:"",machine_tags:"",machine_tag_mode:"",group_id:"",contacts:"",woe_id:"",place_id:"",media:"",has_geo:"",geo_context:"",lat:"",lon:"",radius:"",radius_units:"",is_commons:"",in_gallery:"",is_getty:"",extras:"",per_page:"",page:""},"flickr.galleries.getPhotos":{api_key:"",gallery_id:"",extras:"",per_page:"",page:""},"flickr.galleries.getList":{api_key:"",user_id:"",per_page:"",page:""},"flickr.photosets.getList":{api_key:"",user_id:"",per_page:"",page:""},"flickr.photosets.getPhotos":{api_key:"",photoset_id:"",extras:"",privacy_filter:"",per_page:"",page:"",media:""},"flickr.photosets.getInfo":{api_key:"",photoset_id:""},"flickr.photos.getInfo":{api_key:"",photo_id:"",secret:""}};a.flickr.methods={init:function(b){a.extend(a.flickr.settings,b);return this.each(function(){})},show:function(){a.extend(a.flickr.settings,options)},hide:function(){a.extend(a.flickr.settings,options)},update:function(b){a.extend(a.flickr.settings,options)},complete_panel:function(b){a.extend(a.flickr.settings,b);a.flickr.methods.__template(b);b.callback_end(b)},__template:function(f){a.extend(a.flickr.settings,f);var e=f.template;switch(e){case"embebed":a(f.photos).each(function(j,k){a(f._self).append(k)});if(f.description){a(f.images_description).each(function(l,m){var n=a(f.images_description[l]);var j=a(f.images_description[l]).attr("id");var o=j.replace("-description","");var k=a(f._self).find("#"+o).parent();k.append(n)})}break;case"interspersed":a(f.photos).each(function(j,k){a(f._self).append(k)});if(f.description){a(f.images_description).each(function(l,m){var n=a(f.images_description[l]);var j=a(f.images_description[l]).attr("id");var o=j.replace("-description","");var k=a(f._self).find("#"+o).parent();n.insertAfter(k)})}break;case"first-description":a(f.images_description).each(function(j,k){a(f._self).append(k)});a(f.photos).each(function(j,k){a(f._self).append(k)});break;case"first-images":var b=a(f._self);var c=a(f._self);if(f.tpl){a(f._self).append(f.tpl);var g=a(f._self).parent().find('*:contains("{images}"):last');b=g}a(f.photos).each(function(j,k){a(b).append(k)});if(f.tpl){var i=a(f._self).parent().find('*:contains("{description}"):last');c=i}a(f.images_description).each(function(j,k){a(c).append(k)});if(f.tpl){var h=a(f._self).parent().find('*:contains("{images}")');var d=a(f._self).parent().find('*:contains("{description}")');a.merge(h,d).each(function(){var k=a(this).html();var j=k.replace(/{images}/gi,"").replace(/{description}/gi,"");a(this).html(j)})}break;case"continuous":default:if(f.method!="flickr.photos.getInfo"){a(f.photos).each(function(j,k){a(f._self).append(k)})}a(f.images_description).each(function(j,k){a(f._self).append(k)});break}},error:function(){a(options._self).append("Error de carga de datos: Revise su conexion de internet o su servicio de Flickr")},photosSearch:function(b){return this.each(function(){b._self=this;b.method="flickr.photos.search";a.flickr.methods.functionReplace(b)})},flickr_photos_search:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_galleries_getList:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_photosets_getList:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_galleries_getPhotos:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_photosets_getPhotos:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_photos_getInfo:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},flickr_photosets_getInfo:function(b){return this.each(function(){b._self=this;a.flickr.methods.functionReplace(b)})},functionReplace:function(c){var d=new a.flickrClass();a.flickr.counter++;var b=new Object();a.extend(b,d.settings);a.extend(b,c);d.settings=b;switch(c.method){case"flickr.photos.getInfo":a.flickr.methods._getInfo(d.settings);break;case"flickr.photosets.getList":case"flickr.photosets.getInfo":a.flickr.methods._getList(d.settings);break;default:a.flickr.methods._photos(d.settings)}},photosInfo:function(b){return this.each(function(){b._self=this;
b.method="flickr.photos.getInfo";a.flickr.methods.functionReplace(b)})},__createObjectMethod:function(b){var c={};var d=a.flickr.APIFlickr[b.method];for(var e in d){if(b[e]!=undefined){c[e]=b[e]}}return c},_photos:function(e){a.flickr.methods.__clearContainer(e);var b=a.flickr.methods.__url(e.method,a.flickr.methods.__createObjectMethod(e));var f="<!-- photos -->";var c=a.getJSON(b,function(i){var h=[];if(i.photos){var g=i.photos.photo}else{if(i.photoset){var g=i.photoset.photo}}if(g){if(e.controByCallback){e.callback_end(g)}else{a(g).each(function(s,r){var j=a.flickr.methods.__src(r,e.thumbnail_size);var o=r.title;var k=r.id;var q="#"+r.id+"-description";var l=r.secret;var n=new Image();n.src=j;n.alt=o;n.id=k;a(n).attr(e.titleImg,q);a(n).attr("secret",l);if(e.replaceTitle){a(n).attr("title",o)}var m=n;if(e.imageLink){m=a.flickr.methods.__linkTag(r,j,e).append(n)}var p=m;if(e.repeattpl){p=a.flickr.methods.__repeatTPL(p,e)}h.push(p);a(e._self).append(p)});e.photos=h}}}).complete(function(){if(!e.controByCallback){if(e.description){e.method="flickr.photos.getInfo";e.totalPhotos=e.photos.length;a(e.photos).each(function(i,j){var h="0";var g="0";if(e.imageLink||e.repeattpl){h=a(j).find("img").attr("id");g=a(j).find("img").attr("secret")}else{h=j.id;g=j.secret}e.photo_id=h;e.secret=g;a.flickr.methods._getInfo(e)})}else{a.flickr.methods.complete_panel(e)}}}).error(function(){a.flickr.methods.error()});var d=e.photos;return d},_getList:function(c){var b=a.flickr.methods.__url(c.method,a.flickr.methods.__createObjectMethod(c));if(c.images_description==undefined){c.images_description=new Array()}a.getJSON(b,function(d){if(d.photosets){if(c.controByCallback){c.callback_end(d.photosets.photoset)}else{}}else{if(d.photoset){if(c.controByCallback){c.callback_end(d.photoset)}else{}}}}).complete(function(){if(!c.controByCallback){a.flickr.methods.complete_panel(c)}})},_getInfo:function(d){var c=d.photo_id;var b=a.flickr.methods.__url(d.method,a.flickr.methods.__createObjectMethod(d));if(d.images_description==undefined){d.images_description=new Array()}a.getJSON(b,function(f){if(d.controByCallback){d.callback_end(f.photo)}else{if(f.photo){var l=f.photo.title._content;var m=f.photo.description._content;var e=f.photo.dates.taken;var n=f.photo.tags.tag;var j="";if(d.repeattpl_description.length>2){j=a(d.repeattpl_description);j.attr("id",c+"-description").addClass("desc-content "+d.desCotentCSS)}else{j=a('<div class="desc-content '+d.desCotentCSS+'" id="'+c+'-description"></div>')}var h=d.description_attr.split(",");for(var g=0;g<h.length;g++){if(h[g]=="title"){j.append('<h3 class="title '+d.titleCSS+'">'+l+"</h3>")}else{if(h[g]=="description"){j.append('<span class="desc '+d.descCSS+'">'+m+"</span>")}else{if(h[g]=="date"){j.append('<span class="date '+d.dateCSS+'">'+e+"</span>")}else{if(h[g]=="tags"){var k='<div class="tags">';a(n).each(function(i,o){k+='<span class="tag '+d.tagCSS+'">'+o.raw+"</span>"});k+="</div>";j.append(a(k))}}}}}d.images_description.push(j);d.info=f.photo}}}).complete(function(){if(!d.controByCallback){if(d.totalPhotos==undefined){a.flickr.methods.complete_panel(d)}else{if(d.totalPhotos==d.counter){a.flickr.methods.complete_panel(d)}}d.counter++}})},__url:function(f,d){var c="";for(var e in d){c+=e+"="+d[e]+"&"}var b="http://api.flickr.com/services/rest/?method="+f+"&format=json"+(a.flickr.methods.__isEmpty(d)?"":"&"+c)+"&jsoncallback=?";return b},__isEmpty:function(c){for(var b in c){return false}return true},__src:function(b,c){var e=(c==undefined)?"_s":a.flickr.methods.__translate(c);var d="http://farm"+b.farm+".static.flickr.com/"+b.server+"/"+b.id+"_"+b.secret+e+".jpg";return d},__translate:function(b){switch(b){case"sq":return"_s";case"s":return"_m";case"t":return"_t";case"m":return"";case"z":return"_z";case"b":return"_b";case"o":return"_b";default:return""}},__linkTag:function(d,b,c){var e=a.flickr.methods.__translate(c.thumbnail_size);var f=a.flickr.methods.__translate(c.sizeLinkImage);src2=b.replace(e,f);if(b===undefined){b=["http://www.flickr.com/photos",d.owner,d.id].join("/")}return a('<a href="'+src2+'" title="'+d.title+'" class="'+c.linkTagCSS+'"></a>')},__repeatTPL:function(c,b){var d=b.repeattpl;d.replace(/{images}/gi,"").replace(/{description}/gi,"");return a(d).append(c)},__clearContainer:function(b){if(b.clearContainer){a(b.settings._self).html("")}}};a.fn.aFlickr=function(b){var d=b.replace(/\./gi,"_");var c=new Object();c.method=b;a.extend(arguments[1],c);if(a.flickr.methods[d]){return a.flickr.methods[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof d==="object"||!d){return a.flickr.methods.init.apply(this,arguments)}else{a.error("Method "+d+" does not exist on jQuery.tooltip")}}}})(jQuery);var attachFlickr=(function(){});window.attachFlickr=window.$attachFlickr=attachFlickr;